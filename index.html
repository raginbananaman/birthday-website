<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>A Universe for Us</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400..900;1,400..900&family=Kalam:wght@300;400;700&display=swap" rel="stylesheet">

    <style>
        /* ==================================
           1. CORE STYLES & SETUP
           ================================== */

        :root {
            --purple-glow: #9f50ff;
            --green-glow: #00ffc3;
            --deep-space: #0c001f;
            --text-color: #e0e0e0;
            --heading-font: 'Playfair Display', serif;
            --letter-font: 'Kalam', cursive;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            scroll-behavior: smooth;
        }

        body {
            background-color: var(--deep-space);
            color: var(--text-color);
            font-family: var(--heading-font);
            overflow-x: hidden; /* Prevent horizontal scrollbar from animations */
        }

        section {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            position: relative;
            padding: 4rem 2rem;
            z-index: 2; /* Keep content above background */
        }
        
        h2 {
            font-size: 3rem;
            margin-bottom: 2rem;
            text-shadow: 0 0 10px var(--purple-glow), 0 0 20px var(--green-glow);
        }

        /* ==================================
           2. ANIMATED STARRY BACKGROUND
           ================================== */
        
        #starry-sky {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1;
            background-image:
                radial-gradient(1px 1px at 20px 30px, #eee, rgba(0,0,0,0)),
                radial-gradient(1px 1px at 40px 70px, #fff, rgba(0,0,0,0)),
                radial-gradient(1px 1px at 50px 160px, #ddd, rgba(0,0,0,0)),
                radial-gradient(1px 1px at 90px 40px, #fff, rgba(0,0,0,0)),
                radial-gradient(2px 2px at 150px 120px, #ddd, rgba(0,0,0,0)),
                radial-gradient(1px 1px at 130px 200px, #eee, rgba(0,0,0,0)),
                radial-gradient(1px 1px at 160px 240px, #ddd, rgba(0,0,0,0));
            background-repeat: repeat;
            background-size: 250px 250px;
            animation: move-stars 60s linear infinite;
        }

        @keyframes move-stars {
            from { background-position: 0 0; }
            to { background-position: 250px 250px; }
        }

        /* ==================================
           3. SECTION 1: WELCOME SCREEN
           ================================== */

        #welcome-screen {
            text-align: center;
        }

        #welcome-screen h1 {
            font-size: 4rem;
            font-style: italic;
            text-shadow: 0 0 15px var(--green-glow), 0 0 25px var(--purple-glow);
            animation: float-in 1.5s ease-out;
        }
        
        .enter-button {
            margin-top: 3rem;
            padding: 1rem 2.5rem;
            font-size: 1.2rem;
            font-family: var(--heading-font);
            color: white;
            background: transparent;
            border: 2px solid var(--green-glow);
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-shadow: 0 0 5px var(--green-glow);
            box-shadow: 0 0 10px var(--green-glow), inset 0 0 10px var(--green-glow);
            animation: float-in 2s ease-out;
        }

        .enter-button:hover {
            background-color: var(--green-glow);
            color: var(--deep-space);
            transform: scale(1.1);
            box-shadow: 0 0 20px var(--green-glow), inset 0 0 5px var(--green-glow);
        }

        .shooting-star {
            position: absolute;
            top: 50%;
            left: 50%;
            width: 4px;
            height: 4px;
            background: var(--green-glow);
            border-radius: 50%;
            box-shadow: 0 0 10px var(--green-glow), 0 0 20px var(--green-glow), 0 0 40px var(--purple-glow);
            animation: shoot 5s linear infinite;
        }

        .shooting-star::before {
            content: '';
            position: absolute;
            width: 150px;
            height: 2px;
            background: linear-gradient(90deg, var(--green-glow), transparent);
            transform: translateY(-50%) rotate(-45deg);
        }

        @keyframes shoot {
            0% { transform: translate(-200vw, -50vh) scale(0.5); opacity: 1; }
            80% { opacity: 1; }
            100% { transform: translate(100vw, 100vh) scale(1.5); opacity: 0; }
        }
        
        @keyframes float-in {
            from { opacity: 0; transform: translateY(50px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* ==================================
           4. SECTION 2: LOVE LETTER
           ================================== */
        
        #love-letter {
            background: radial-gradient(circle, #1a023a 0%, var(--deep-space) 70%);
        }

        .letter-container {
            background: rgba(0, 0, 0, 0.3);
            backdrop-filter: blur(5px);
            padding: 3rem 4rem;
            border-radius: 15px;
            max-width: 800px;
            border: 1px solid rgba(159, 80, 255, 0.2);
            box-shadow: 0 0 30px rgba(159, 80, 255, 0.2);
        }

        #letter-content {
            font-family: var(--letter-font);
            font-size: 1.8rem;
            line-height: 2.8rem;
            white-space: pre-wrap; /* Respects new lines */
            color: #f0f0f0;
        }
        
        .cursor {
            display: inline-block;
            width: 3px;
            height: 2.5rem;
            background-color: var(--green-glow);
            animation: blink 0.7s infinite;
        }

        @keyframes blink {
            0%, 100% { opacity: 1; }
            50% { opacity: 0; }
        }

        /* ==================================
           5. SECTION 3: MEMORIES GALLERY
           ================================== */
        
        #memories-gallery {
            overflow: hidden; /* Hide scrollbars of the container */
        }
        
        .gallery-container {
            display: flex;
            width: 100%;
            padding: 2rem 0;
            overflow-x: auto;
            /* Custom scrollbar for aesthetics */
            scrollbar-width: thin;
            scrollbar-color: var(--purple-glow) var(--deep-space);
        }
        
        .gallery-container::-webkit-scrollbar {
            height: 8px;
        }
        
        .gallery-container::-webkit-scrollbar-track {
            background: var(--deep-space);
        }
        
        .gallery-container::-webkit-scrollbar-thumb {
            background-color: var(--purple-glow);
            border-radius: 10px;
            border: 2px solid var(--deep-space);
        }

        .gallery-item {
            flex: 0 0 auto; /* Prevent shrinking */
            width: 400px;
            height: 500px;
            margin: 0 20px;
            border-radius: 10px;
            overflow: hidden;
            border: 3px solid transparent;
            transition: all 0.4s ease;
            opacity: 0; /* For float-in animation */
            transform: translateY(100px); /* Start position for animation */
        }
        
        .gallery-item img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.4s ease;
        }
        
        .gallery-item:hover {
            transform: scale(1.05);
        }

        .gallery-item:hover img {
            transform: scale(1.1);
        }
        
        /* Alternating glowing borders on hover */
        .gallery-container .gallery-item:nth-child(odd):hover {
            border-color: var(--green-glow);
            box-shadow: 0 0 20px var(--green-glow);
        }

        .gallery-container .gallery-item:nth-child(even):hover {
            border-color: var(--purple-glow);
            box-shadow: 0 0 20px var(--purple-glow);
        }

        /* ==================================
           6. SECTION 4: VIDEO MONTAGE
           ================================== */

        .video-frame {
            position: relative;
            width: 90%;
            max-width: 960px;
            aspect-ratio: 16 / 9;
            background: linear-gradient(145deg, var(--green-glow), var(--purple-glow));
            padding: 15px;
            border-radius: 20px;
            box-shadow: 0 0 30px var(--purple-glow), 0 0 40px var(--green-glow);
            animation: spin-glow 10s linear infinite;
        }
        
        @keyframes spin-glow {
            from { filter: hue-rotate(0deg); }
            to { filter: hue-rotate(360deg); }
        }

        .video-frame iframe {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: calc(100% - 30px);
            height: calc(100% - 30px);
            border: none;
            border-radius: 10px;
        }

        /* ==================================
           7. SECTION 5: SURPRISE GIFT
           ================================== */
        
        .gift-container {
            text-align: center;
        }

        .surprise-box {
            position: relative;
            cursor: pointer;
            width: 200px;
            height: 200px;
            transition: transform 0.3s ease;
        }

        .surprise-box:hover {
            transform: scale(1.1);
        }

        .envelope {
            width: 200px;
            height: 150px;
            background: linear-gradient(45deg, #4c1a8a, #7f3db5);
            position: relative;
            border-radius: 10px;
            box-shadow: 0 0 20px var(--purple-glow), inset 0 0 15px rgba(0,0,0,0.4);
        }
        .envelope-flap {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 75px;
            background: linear-gradient(225deg, #4c1a8a, #7f3db5);
            clip-path: polygon(0 0, 100% 0, 50% 100%);
            border-radius: 10px 10px 0 0;
        }
        
        .surprise-box.opened .envelope-flap {
            animation: open-flap 0.5s forwards;
        }

        @keyframes open-flap {
            from { transform: rotateX(0deg); }
            to { transform: rotateX(180deg); transform-origin: top; }
        }

        .surprise-message {
            margin-top: 3rem;
            font-size: 2rem;
            font-family: var(--letter-font);
            color: var(--green-glow);
            text-shadow: 0 0 10px var(--green-glow);
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.5s ease 0.3s, transform 0.5s ease 0.3s;
        }

        .surprise-box.opened + .surprise-message {
            opacity: 1;
            transform: translateY(0);
        }
        
        .replay-button {
            margin-top: 2rem;
            padding: 0.8rem 2rem;
            font-size: 1rem;
            color: white;
            background: transparent;
            border: 2px solid var(--purple-glow);
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-shadow: 0 0 5px var(--purple-glow);
            box-shadow: 0 0 10px var(--purple-glow), inset 0 0 10px var(--purple-glow);
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.5s ease;
        }

        .replay-button.visible {
            opacity: 1;
            visibility: visible;
        }

        .replay-button:hover {
            background-color: var(--purple-glow);
            color: var(--deep-space);
            transform: scale(1.1);
            box-shadow: 0 0 20px var(--purple-glow), inset 0 0 5px var(--purple-glow);
        }
        
    </style>
</head>
<body>

    <audio id="background-music" loop>
        <source src="YOUR_AUDIO_FILE_URL.mp3" type="audio/mpeg">
        Your browser does not support the audio element.
    </audio>

    <div id="starry-sky"></div>

    <section id="welcome-screen">
        <div class="shooting-star"></div>
        <h1>To my favorite star in the galaxy...</h1>
        <button class="enter-button" id="enter-button">Enter our universe 💫</button>
    </section>

    <section id="love-letter">
        <div class="letter-container">
            <p id="letter-content"></p>
        </div>
    </section>

    <section id="memories-gallery">
        <h2>Our Constellation of Memories</h2>
        <div class="gallery-container">
            <div class="gallery-item"><img src="https://via.placeholder.com/400x500/9f50ff/ffffff?text=Our+First+Date" alt="Memory 1"></div>
            <div class="gallery-item"><img src="https://via.placeholder.com/400x500/00ffc3/000000?text=That+Funny+Moment" alt="Memory 2"></div>
            <div class="gallery-item"><img src="https://via.placeholder.com/400x500/9f50ff/ffffff?text=Spontaneous+Trip" alt="Memory 3"></div>
            <div class="gallery-item"><img src="https://via.placeholder.com/400x500/00ffc3/000000?text=Holiday+Together" alt="Memory 4"></div>
            <div class="gallery-item"><img src="https://via.placeholder.com/400x500/9f50ff/ffffff?text=Just+Being+Us" alt="Memory 5"></div>
            <div class="gallery-item"><img src="https://via.placeholder.com/400x500/00ffc3/000000?text=Another+Memory" alt="Memory 6"></div>
        </div>
    </section>

    <section id="video-montage">
        <h2>A Cinematic Journey</h2>
        <div class="video-frame">
            <iframe src="https://www.youtube.com/embed/dQw4w9WgXcQ" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
        </div>
    </section>

    <section id="surprise-gift">
        <div class="gift-container">
            <h2>One More Surprise...</h2>
            <div class="surprise-box" id="surprise-box">
                <div class="envelope">
                    <div class="envelope-flap"></div>
                </div>
            </div>
            <div class="surprise-message">
                Happy Birthday, my love. My universe is better with you in it.
            </div>
            <button class="replay-button" id="replay-button" onclick="window.scrollTo(0, 0);">Replay this experience</button>
        </div>
    </section>

    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.2/dist/confetti.browser.min.js"></script>

    <script>
        document.addEventListener('DOMContentLoaded', function() {

            // ==================================
            // 1. MUSIC & EXPERIENCE TRIGGER
            // ==================================
            const music = document.getElementById('background-music');
            const enterButton = document.getElementById('enter-button');
            let musicPlayed = false;

            enterButton.addEventListener('click', () => {
                // Scroll to the next section
                document.getElementById('love-letter').scrollIntoView();

                // Play music only on the first click
                if (!musicPlayed) {
                    music.play().catch(error => {
                        console.error("Audio playback failed. Ensure the link is correct and the browser has been interacted with.", error);
                    });
                    musicPlayed = true;
                }
            });


            // ==================================
            // 2. LOVE LETTER TYPEWRITER
            // ==================================
            const letterContent = document.getElementById('letter-content');
            // EDIT YOUR LETTER HERE. Each string is a new line.
            const loveLetterText = [
                "My Dearest Love,",
                "\n\nFrom the moment you entered my orbit, my world has been a brighter, more beautiful place.",
                "You are the star that guides me, the nebula that colors my dreams.",
                "With every passing moment, my love for you expands like the universe itself.",
                "\n\nForever and always,",
                "\nYour Name"
            ];
            let fullText = loveLetterText.join('');
            let currentChar = 0;

            function typeLetter() {
                if (!letterContent) return;
                
                // Add cursor span if not present
                if (!letterContent.querySelector('.cursor')) {
                    letterContent.innerHTML = '<span class="cursor"></span>';
                }

                if (currentChar < fullText.length) {
                    const char = fullText.charAt(currentChar);
                    letterContent.insertBefore(document.createTextNode(char), letterContent.querySelector('.cursor'));
                    currentChar++;
                    setTimeout(typeLetter, 70); // Adjust typing speed here (in ms)
                } else {
                   letterContent.querySelector('.cursor').style.display = 'none'; // Hide cursor when done
                }
            }

            // Start typewriter when the letter section is scrolled into view
            const letterObserver = new IntersectionObserver((entries) => {
                if (entries[0].isIntersecting) {
                    setTimeout(typeLetter, 1000); // Delay before starting
                    letterObserver.disconnect(); // Only run once
                }
            }, { threshold: 0.5 }); // Trigger when 50% of the element is visible

            if(document.getElementById('love-letter')) {
                letterObserver.observe(document.getElementById('love-letter'));
            }

            // ==================================
            // 3. GALLERY FADE-IN ANIMATION
            // ==================================
            const galleryItems = document.querySelectorAll('.gallery-item');
            const galleryObserver = new IntersectionObserver((entries, observer) => {
                entries.forEach((entry, index) => {
                    if (entry.isIntersecting) {
                        setTimeout(() => {
                            entry.target.style.transition = 'opacity 0.8s ease, transform 0.8s ease';
                            entry.target.style.opacity = '1';
                            entry.target.style.transform = 'translateY(0)';
                        }, index * 200); // Stagger the animation
                        observer.unobserve(entry.target);
                    }
                });
            }, { threshold: 0.1 });

            galleryItems.forEach(item => {
                galleryObserver.observe(item);
            });

            // ==================================
            // 4. SURPRISE GIFT & CONFETTI
            // ==================================
            const surpriseBox = document.getElementById('surprise-box');
            const replayButton = document.getElementById('replay-button');

            surpriseBox.addEventListener('click', function() {
                if (this.classList.contains('opened')) return; // Prevent re-triggering
                
                this.classList.add('opened');

                // Confetti animation
                const duration = 5 * 1000;
                const animationEnd = Date.now() + duration;
                const defaults = { startVelocity: 30, spread: 360, ticks: 60, zIndex: 100 };

                function randomInRange(min, max) {
                    return Math.random() * (max - min) + min;
                }

                const interval = setInterval(function() {
                    const timeLeft = animationEnd - Date.now();

                    if (timeLeft <= 0) {
                        return clearInterval(interval);
                    }

                    const particleCount = 50 * (timeLeft / duration);
                    // Since it's a surprise, go big
                    confetti(Object.assign({}, defaults, { particleCount, origin: { x: randomInRange(0.1, 0.3), y: Math.random() - 0.2 }, colors: ['#9f50ff', '#00ffc3', '#ffffff'] }));
                    confetti(Object.assign({}, defaults, { particleCount, origin: { x: randomInRange(0.7, 0.9), y: Math.random() - 0.2 }, colors: ['#9f50ff', '#00ffc3', '#ffffff'] }));
                }, 250);

                // Show the replay button after the animation
                setTimeout(() => {
                    replayButton.classList.add('visible');
                }, 2000);

            }, { once: true }); // Listener runs only once
            
        });
    </script>

</body>
</html>